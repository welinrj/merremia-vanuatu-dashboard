# Nginx configuration for Vanuatu NBSAP Portal
# Copy dist/ contents to the web root specified below.

# For root deployment:
server {
    listen 80;
    server_name nbsap.gov.vu;

    root /var/www/nbsap;
    index index.html;

    # SPA routing: serve index.html for all routes
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Cache static assets aggressively
    location /assets/ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # Gzip compression
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml;
}

# For subpath deployment (e.g., on DEPC website at /nbsap-portal/):
# server {
#     listen 80;
#     server_name www.depc.gov.vu;
#
#     location /nbsap-portal/ {
#         alias /var/www/depc/nbsap-portal/;
#         try_files $uri $uri/ /nbsap-portal/index.html;
#     }
#
#     location /nbsap-portal/assets/ {
#         alias /var/www/depc/nbsap-portal/assets/;
#         expires 1y;
#         add_header Cache-Control "public, immutable";
#     }
# }
